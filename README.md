# 🎄 3D Gesture-Controlled Christmas Tree (Grand Luxury Edition)

# 奢华版手势控制 3D 粒子圣诞树

本项目是一个基于 **Three.js** 和 **MediaPipe** 构建的互动 3D 网页应用。它融合了电影级的视觉效果与前沿的计算机视觉技术，允许用户通过简单的手势，在“奢华圣诞树”与“漫天星河”之间自由切换，并沉浸式地浏览照片回忆。

代码经过深度优化，**完美适配移动端与桌面端**，并加入了精准的交互反馈机制。

---

## ✨ 核心亮点 (Key Features)

* **🎨 奢华视觉风格 (Grand Luxury)**：
    * 摒弃廉价感，采用 **哑光绿 (Deep Green)**、**香槟金 (Champagne Gold)** 与 **圣诞红 (Accent Red)** 为主色调。
    * 集成 Unreal Bloom 辉光效果与物理材质（PBR），营造高级的节日氛围。

* **🎯 精准交互系统 (Precise Interaction)**：
    * **射线检测 (Raycasting)**：告别随机，系统会精确识别手指指向的 specific 照片进行放大。
    * **智能防抖 (Anti-Shake)**：内置“确认帧”算法，有效过滤手部微颤和误触，操作稳如泰山。
    * **视觉光标 (Visual Cursor)**：屏幕上实时显示手部追踪光点（白色搜索态 / 金色锁定态），操作反馈清晰直观。

* **📱 全端完美适配 (Mobile Optimized)**：
    * **自动前置镜头**：手机端自动调用前置摄像头，方便互动。
    * **性能自适应**：针对移动设备优化了检测流分辨率，确保低发热、高帧率（60fps）。
    * **iOS 兼容**：完美解决 iOS Safari 的自动播放限制与权限策略。

* **❓ 内置指引 (In-App Guide)**：
    * 右上角集成帮助按钮，点击即可查看磨砂玻璃风格的手势说明卡片，降低上手难度。

---

## 🎮 交互模式 (Modes)

系统根据手势自动在以下三种状态间切换：

1.  **🌲 合拢态 (Tree Mode)**
    * **触发**：握拳 (Fist)
    * **描述**：所有粒子与照片汇聚，旋转组成一棵闪耀的 3D 圣诞树。

2.  **✨ 散开态 (Scatter Mode)**
    * **触发**：张开五指 (Open Palm)
    * **描述**：粒子炸开，化作无重力的漫天星河。照片在空中漂浮，支持通过手掌移动来旋转 360° 视角。

3.  **🖼️ 聚焦态 (Focus Mode)**
    * **触发**：指尖捏合 (Pinch)
    * **描述**：精准抓取选中的照片并放大至屏幕中央，背景保持虚化。

---

## ✋ 手势操作指南 (Gestures)

请确保网页已获摄像头权限。右上角 "?" 按钮可随时查看此说明。

| 手势图标 | 动作 (Action) | 功能 (Function) |
| :---: | :--- | :--- |
| ✊ | **握拳** (Fist) | **召唤**：重组圣诞树。 |
| 🖐️ | **张开手** (Open Palm) | **散开**：进入星空模式。 |
| 👌 | **捏合** (Pinch) | **抓取**：选中并放大光标指向的照片（光标变金）。 |
| 👋 | **移动手** (Move) | **视角**：在散开模式下，控制场景旋转。 |

---

## 🛠️ 安装与部署 (Installation)

### 方式一：在线体验 (Vercel/GitHub Pages)
最推荐的方式。**手机端必须使用此方式（需要 HTTPS）。**

1.  Fork 本仓库到您的 GitHub。
2.  在 **Vercel** 中导入该项目并部署。
3.  打开生成的网址（如 `https://your-tree.vercel.app`）。
    * *注：您可以将仓库设为 Private，不影响 Vercel 部署，这样可以保护您的照片隐私。*

### 方式二：本地开发 (Localhost)

如果您想替换默认照片或音乐：

**1. 准备文件结构**
```text
Project/
├── index.html         (主程序)
├── ChristmasSong.mp3  (背景音乐)
└── photos/            (照片文件夹，文件名推荐小写)
    ├── 1.jpg
    ├── 2.jpg
    └── ...
````

**2. 修改配置**
打开 `index.html`，找到 `DEFAULT_PHOTO_PATHS`，填入您的照片路径：

```javascript
const DEFAULT_PHOTO_PATHS = [
  "photos/1.jpg",
  "photos/my-cat.jpg",
  // ...
];
```

**3. 启动本地服务器**
由于浏览器 CORS 安全策略，**不能**直接双击 HTML 打开。

```bash
# Python 3
python -m http.server 8000
# 然后访问 http://localhost:8000
```

-----

## ⚠️ 常见问题 (FAQ)

**Q: 手机上打不开摄像头？**
A: 请检查网址是否以 **`https://`** 开头。浏览器禁止在非安全环境（http）下调用摄像头。请使用 Vercel 部署。

**Q: 背景音乐不自动播放？**
A: 现代浏览器禁止自动播放音频。请点击屏幕任意位置（或根据界面提示 "Tap screen to play music"）即可开始播放。

**Q: 我上传的照片会被公开吗？**
A:

1.  如果您使用界面上的 "Add Memories" 按钮上传：照片仅保存在您当前的浏览器内存中，刷新即逝，**绝对安全**。
2.  如果您将照片放入 `photos/` 文件夹并推送到 GitHub：请务必将仓库设为 **Private (私有)**，这样只有拥有网站链接的人能看到，路人无法下载源码。

-----

## 📝 技术栈

  * **Three.js**: WebGL 3D 渲染
  * **MediaPipe**: 高性能手势识别
  * **Post-processing**: 辉光与电影感滤镜
